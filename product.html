<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details</title>
    <link rel="stylesheet" href="src/css/main.css">
    <style>
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 0.8rem; /* reduced gap */
            padding: 0.8rem; /* reduced padding */
        }
        .product-item {
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 0.4rem; /* reduced padding */
            text-align: center;
            background: #fff;
            position: relative;
            overflow: hidden;
        }
        .product-item img {
            width: 25%; /* reduced further from 50% to 25% */
            height: auto;
            border-radius: 5px;
            display: block;
            margin: auto;
        }
        .product-image-container {
            position: relative;
            overflow: hidden;
        }
        .product-image-container img {
            transition: transform 0.3s ease;
        }
        .product-image-container:hover img {
            transform: scale(1.5);
        }
        .quick-view-btn {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(43, 57, 144, 0.8);
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .product-item:hover .quick-view-btn {
            opacity: 1;
        }
        .product-ratings {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin: 0.5rem 0;
        }
        .stars {
            color: gold;
        }
        .review-count {
            color: #666;
            font-size: 0.9em;
        }
        /* Breadcrumb styles */
        .breadcrumb-nav {
            padding: 1rem;
            background: #f5f5f5;
            margin-bottom: 1rem;
        }
        .breadcrumb-nav ol {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            flex-wrap: wrap;
        }
        .breadcrumb-nav li {
            display: flex;
            align-items: center;
        }
        .breadcrumb-nav li:not(:last-child)::after {
            content: "›";
            margin: 0 0.5rem;
            color: #666;
        }
        /* Quick view modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }
        .close-modal {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
        }
        /* Reviews section */
        .reviews-section {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #ddd;
        }
        .review-item {
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #eee;
        }
        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        .reviewer-name {
            font-weight: bold;
        }
        .review-date {
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <header>
        <nav class="main-nav">
            <div class="logo">ISE Health Care Demo</div>
            <!-- ...existing navbar... -->
        </nav>
    </header>
    <main>
        <!-- Add breadcrumb navigation -->
        <nav class="breadcrumb-nav" aria-label="Breadcrumb">
            <ol>
                <li><a href="index.html">Home</a></li>
                <li id="section-crumb"></li>
                <li id="item-crumb" aria-current="page"></li>
            </ol>
        </nav>
        
        <section id="product-details">
            <!-- Product details will be rendered here -->
        </section>

        <!-- Quick view modal -->
        <div class="modal" id="quick-view-modal">
            <div class="modal-content">
                <button class="close-modal" aria-label="Close modal">&times;</button>
                <div id="quick-view-content"></div>
            </div>
        </div>
    </main>
    <script>
        const BASE_URL = 'http://localhost:8000';
        // Read query parameters
        const params = new URLSearchParams(window.location.search);
        const section = params.get('section');
        const item = params.get('item');

        const productDetails = document.getElementById('product-details');
        
        // Render header and grid container for products
        productDetails.innerHTML = `
            <h1>${item}</h1>
            <p>Category: ${section}</p>
            <hr>
            <div class="product-grid"></div>
            <a href="${BASE_URL}/index.html">Back to Home</a>
        `;

        // Update breadcrumb navigation
        document.querySelector('.breadcrumb-nav ol').innerHTML = `
            <li><a href="${BASE_URL}/index.html">Home</a></li>
            <li>${section}</li>
            <li aria-current="page">${item}</li>
        `;

        const productGrid = document.querySelector('.product-grid');

        // Helper function to render a product card
        function renderProduct({ name, image, price }) {
            return `
                <div class="product-item">
                    <div class="product-image-container">
                        <img src="${image}" alt="${name}">
                        <button class="quick-view-btn" onclick="showQuickView('${name}', '${image}', '${price}')">Quick View</button>
                    </div>
                    <h3>${name}</h3>
                    <p>${price}</p>
                    <div class="product-ratings">
                        <div class="stars">★★★★☆</div>
                        <span class="review-count">(4.0)</span>
                    </div>
                    <a href="${BASE_URL}/product.html?section=${section}&item=${encodeURIComponent(name)}">View Details</a>
                </div>
            `;
        }
        
        if(section === "diagnostics-type") {
            // Use new diagnostics products data with explicit image links and "Price not set"
            const diagnosticsProducts = [
                "Bioline Blood Collection Monitor",
                "Bioline Bioline India Manual Tube Stripper",
                "Maxsol Blood Tube Stripper",
                "Bioline Agglutination Viewer"
            ];
            const diagnosticsImages = [
                "https://ik.imagekit.io/z6mqjyyzz/media/public/bioline-blood-collection-monitor-box-of-1-unit-bio-20-plus-10_03_2025-aa1645c4.png?tr=w-750,q-100,f-avif",
                "https://ik.imagekit.io/z6mqjyyzz/media/public/1b6f36dbbe5c4d1b9_Maxsol-Tube-sealer.jpg?tr=w-1000,q-75,f-avif",
                "https://ik.imagekit.io/z6mqjyyzz/media/public/d489cbf6e9464a90a_MBBLOBEATUEPIGHMR9XX.jpg?tr=w-1000,q-75,f-avif",
                "https://ik.imagekit.io/z6mqjyyzz/media/public/bioline-agglutination-viewer-box-of-1-unit-bio-av-20-04_03_2025-3d9e107d.jpg?tr=w-1000,q-75,f-avif"
            ];
            let productsHTML = "";
            diagnosticsProducts.forEach((prodName, index) => {
                productsHTML += renderProduct({ name: prodName, image: diagnosticsImages[index], price: "Price not set" });
            });
            productGrid.innerHTML = productsHTML;
        } else if(section === "sub" && item === "Biochemistry") {
            // Updated Biochemistry branch after removing "Micropipette" and "Fluoride Blood Collection Tube"
            const biochemistryNames = [
                "EDTA Blood Collection Tube",
                "Biochemistry Reagent",
                "Micropipette Tip",
                "Centrifuge Tube",
                "Clot Activator Tube",
                "Sodium Citrate Blood collection Tube",
                "Coverslip",
                "Heparin Blood Collection Tube"
            ];
            const biochemistryImages = [
                "https://ik.imagekit.io/z6mqjyyzz/media/public/bradley-edta-k3-non-vacuum-blood-collection-tube-2ml-pack-of-100-pieces-bl-7000-17_02_20_8gasKYF.png?tr=w-1000,q-75,f-avif",  // EDTA Blood Collection Tube
                "https://ik.imagekit.io/z6mqjyyzz/media/public/default_images/Images/NewGenericNames/Biochemistry_Reagent.jpg?tr=w-150,q-60,f-avif",                         // Biochemistry Reagent
                "https://ik.imagekit.io/z6mqjyyzz/media/public/default_images/Images/NewGenericNames/Pipette_tips_2_Mkj8pjd.jpg?tr=w-150,q-60,f-avif",                         // Micropipette Tip
                "https://ik.imagekit.io/z6mqjyyzz/media/public/default_images/image_YOqaG8Y.png?tr=w-150,q-60,f-avif",                                                      // Centrifuge Tube
                "https://ik.imagekit.io/z6mqjyyzz/media/public/default_images/Images/NewGenericNames/Yellow-gel-tube_6CC1LGJ.jpg?tr=w-150,q-60,f-avif",                       // Clot Activator Tube
                "https://ik.imagekit.io/z6mqjyyzz/media/public/default_images/Images/NewGenericNames/Citrate_YiIhYbo.jpg?tr=w-150,q-60,f-avif",                             // Sodium Citrate Blood collection Tube
                "https://ik.imagekit.io/z6mqjyyzz/media/public/default_images/Images/NewGenericNames/Coverslip_2_O7KPlHO.jpg?tr=w-150,q-60,f-avif",                          // Coverslip
                "https://ik.imagekit.io/z6mqjyyzz/media/public/default_images/Images/NewGenericNames/Heparin_Ad65S0R.jpg?tr=w-150,q-60,f-avif"                               // Heparin Blood Collection Tube
            ];
            const biochemistryPrices = Array(biochemistryNames.length).fill("Price not set");
            let productsHTML = "";
            biochemistryNames.forEach((name, index) => {
                productsHTML += renderProduct({ name, image: biochemistryImages[index], price: biochemistryPrices[index] });
            });
            productGrid.innerHTML = productsHTML;
        } else if(section === "sub" && item === "Rapid Card") {
            const rapidCardNames = [
                "Other rapid card",
                "Dengue rapid card",
                "Malaria rapid card",
                "HIV rapid card",
                "Urine strip",
                "HBsAG rapid card",
                "HCV rapid card",
                "Pregnancy kit",
                "Drug testing Rapid card"
            ];
            const rapidCardPrices = Array(rapidCardNames.length).fill("Price not set");
            const rapidCardImages = [
                "https://ik.imagekit.io/z6mqjyyzz/media/public/default_images/Images/NewGenericNames/Rapid_card_WyHDaiT.jpg?tr=w-150,q-60,f-avif", // Other rapid card
                "https://ik.imagekit.io/z6mqjyyzz/media/public/default_images/Images/NewGenericNames/Dengue_Yd4W5Kv.jpg?tr=w-150,q-60,f-avif",      // Dengue rapid card
                "https://ik.imagekit.io/z6mqjyyzz/media/public/default_images/Images/NewGenericNames/Malaria_M0yJmXv.jpg?tr=w-150,q-60,f-avif",     // Malaria rapid card
                "https://ik.imagekit.io/z6mqjyyzz/media/public/default_images/Images/NewGenericNames/HIV_wXolm4Y.jpg?tr=w-150,q-60,f-avif",         // HIV rapid card
                "https://ik.imagekit.io/z6mqjyyzz/media/public/default_images/Images/NewGenericNames/Urine-strip-2_FJB6r7q.jpg?tr=w-150,q-60,f-avif",// Urine strip
                "https://ik.imagekit.io/z6mqjyyzz/media/public/default_images/Images/NewGenericNames/HBsab_tlvXt24.jpg?tr=w-150,q-60,f-avif",         // HBsAG rapid card
                "https://ik.imagekit.io/z6mqjyyzz/media/public/default_images/Images/NewGenericNames/HCV_rapid_card_VRiyA5T.jpg?tr=w-150,q-60,f-avif",  // HCV rapid card
                "https://ik.imagekit.io/z6mqjyyzz/media/public/default_images/pregnancy.jpg?tr=w-150,q-60,f-avif",                                 // Pregnancy kit
                "https://ik.imagekit.io/z6mqjyyzz/media/public/default_images/Drug_testing_Rapid_card.jpg?tr=w-150,q-60,f-avif"                        // Drug testing Rapid card
            ];
            let productsHTML = "";
            rapidCardNames.forEach((name, index) => {
                productsHTML += renderProduct({ name, image: rapidCardImages[index], price: rapidCardPrices[index] });
            });
            productGrid.innerHTML = productsHTML;
        } else if(section === "sub" && item === "Phlebotomy") {
            // Updated Phlebotomy branch with selected items only
            const phlebotomyNames = [
                "EDTA Blood Collection Tube",
                "Clot Activator Tube",
                "Sodium Citrate Blood collection Tube",
                "Heparin Blood Collection Tube"
            ];
            const phlebotomyImages = [
                "https://ik.imagekit.io/z6mqjyyzz/media/public/bradley-edta-k3-non-vacuum-blood-collection-tube-2ml-pack-of-100-pieces-bl-7000-17_02_20_8gasKYF.png?tr=w-1000,q-75,f-avif",  // EDTA Blood Collection Tube
                "https://ik.imagekit.io/z6mqjyyzz/media/public/default_images/Images/NewGenericNames/Yellow-gel-tube_6CC1LGJ.jpg?tr=w-150,q-60,f-avif",         // Clot Activator Tube
                "https://ik.imagekit.io/z6mqjyyzz/media/public/default_images/Images/NewGenericNames/Citrate_YiIhYbo.jpg?tr=w-150,q-60,f-avif",           // Sodium Citrate Blood collection Tube
                "https://ik.imagekit.io/z6mqjyyzz/media/public/default_images/Images/NewGenericNames/Heparin_Ad65S0R.jpg?tr=w-150,q-60,f-avif"             // Heparin Blood Collection Tube
            ];
            const phlebotomyPrices = Array(phlebotomyNames.length).fill("Price not set");
            let productsHTML = "";
            phlebotomyNames.forEach((name, index) => {
                productsHTML += renderProduct({ name, image: phlebotomyImages[index], price: phlebotomyPrices[index] });
            });
            productGrid.innerHTML = productsHTML;
        } else if(section === "consumables-type" && item === "Stethoscope") {
            const stethoscopes = [
                { 
                    name: "Rossmax Sprague Rappaport Stethoscope",
                    image: "https://ik.imagekit.io/z6mqjyyzz/media/public/d3f4d9b59ed248f7b_eb500.png?tr=w-126,q-60,f-avif",
                    price: "Price not set"
                },
                { 
                    name: "3M Littmann Classic III (5806)",
                    image: "https://ik.imagekit.io/z6mqjyyzz/media/public/67fb3ff95ec64c4d8_5806.jpg?tr=w-126,q-60,f-avif",
                    price: "Price not set"
                },
                { 
                    name: "Microtone Stethoscope",
                    image: "https://ik.imagekit.io/z6mqjyyzz/media/public/02231f8ef9d14f0bb_7_Microtone_Stethoscope.jpg?tr=w-126,q-60,f-avif",
                    price: "Price not set"
                },
                { 
                    name: "MCP ELITE ST-EL01",
                    image: "https://ik.imagekit.io/z6mqjyyzz/media/public/6c4bcdfa3c0d433bb_51f8s7odzol._sl1500_.jpg?tr=w-126,q-60,f-avif",
                    price: "Price not set"
                },
                { 
                    name: "3M Littmann Lightweight II S.E. (2450)",
                    image: "https://ik.imagekit.io/z6mqjyyzz/media/public/454c2c06715e4bc3b_3M_Littmann_Classic_III_Monitoring_Stethoscope_5811_-_Smoke_Finish_Ch_mAHHztS.jpeg?tr=w-126,q-60,f-avif",
                    price: "Price not set"
                },
                { 
                    name: "Accusure Stethoscope",
                    image: "https://ik.imagekit.io/z6mqjyyzz/media/public/58bc4d21ca9d46ec8_ste_2.jpg?tr=w-126,q-60,f-avif",
                    price: "Price not set"
                }
            ];
            let productsHTML = "";
            stethoscopes.forEach(prod => {
                productsHTML += renderProduct(prod);
            });
            document.querySelector('.product-grid').innerHTML = productsHTML;
        } else if(section === "consumables-type" && item === "Forceps") {
            // Updated Forceps products for "Forceps" category
            const forcepsProducts = [
                 { name: "GDC Rowe Maxillary Disimpaction Forcep Right", image: "https://ik.imagekit.io/z6mqjyyzz/media/public/a52c2e7f3c8441fa9_Annotation_2023-06-09_141105.png?tr=w-126,q-60,f-avif", price: "Price not set" },
                 { name: "Topdent Artery Forceps", image: "https://ik.imagekit.io/z6mqjyyzz/media/public/c2d64a9040b947a28_WhatsApp_Image_2022-12-02_at_8.38.04_PM_1.jpeg?tr=w-126,q-60,f-avif", price: "Price not set" },
                 { name: "Oracraft Upper Roots Extraction Forceps", image: "https://ik.imagekit.io/z6mqjyyzz/media/public/cc5e7cf23549416ab_MBTACARSCLSDEDIJHG5T.jpg?tr=w-126,q-60,f-avif", price: "Price not set" },
                 { name: "Oracraft Lower Molars Extraction Forceps", image: "https://ik.imagekit.io/z6mqjyyzz/media/public/4b99b3b8eecb4e378_88.jpg?tr=w-126,q-60,f-avif", price: "Price not set" },
                 { name: "Oracraft Lower Roots Extraction Forceps", image: "https://ik.imagekit.io/z6mqjyyzz/media/public/ecd3370adaf64c4da_oracraftimages-96.jpg?tr=w-126,q-60,f-avif", price: "Price not set" },
                 { name: "Topdent Extraction Forceps", image: "https://ik.imagekit.io/z6mqjyyzz/media/public/a24c3de8ee9745199_top_dent_dental_extraction_forceps_set_of_13_.jpg?tr=w-126,q-60,f-avif", price: "Price not set" }
            ];
            let productsHTML = "";
            forcepsProducts.forEach(prod => {
                 productsHTML += renderProduct(prod);
            });
            document.querySelector('.product-grid').innerHTML = productsHTML;
        } else if(section === "consumables-type" && item === "Trolley") {
            const trolleyProducts = [
                { 
                    name: "Medical Consumables",
                    image: "https://ik.imagekit.io/z6mqjyyzz/media/public/default_images/image_HrSjsG3.png?tr=w-128,q-60,f-avif",
                    price: "Price not set"
                },
                { 
                    name: "Surgical Consumables",
                    image: "https://ik.imagekit.io/z6mqjyyzz/media/public/default_images/Images/NewCategories/Surgical_Consumables.png?tr=w-128,q-60,f-avif",
                    price: "Price not set"
                },
                { 
                    name: "Hygiene Control",
                    image: "https://ik.imagekit.io/z6mqjyyzz/media/public/default_images/image_JyGcdN0.png?tr=w-128,q-60,f-avif",
                    price: "Price not set"
                },
                { 
                    name: "Bandages & Wound",
                    image: "https://ik.imagekit.io/z6mqjyyzz/media/public/default_images/image_GrcUUov_WDAoRfJ.png?tr=w-128,q-60,f-avif",
                    price: "Price not set"
                },
                { 
                    name: "Catheters",
                    image: "https://ik.imagekit.io/z6mqjyyzz/media/public/default_images/image_A1xIr5g.png?tr=w-128,q-60,f-avif",
                    price: "Price not set"
                },
                { 
                    name: "Gown & Drapes",
                    image: "https://ik.imagekit.io/z6mqjyyzz/media/public/default_images/image_6rNixWo.png?tr=w-128,q-60,f-avif",
                    price: "Price not set"
                }
            ];
            let productsHTML = "";
            trolleyProducts.forEach(prod => {
                productsHTML += renderProduct(prod);
            });
            document.querySelector('.product-grid').innerHTML = productsHTML;
        } else if(section === "consumables-type" && item === "Syringe with Needle") {
            const syringeWithNeedleProducts = [
                { 
                    name: "HMD Dispovan 3ml Syringe with Needle",
                    image: "https://ik.imagekit.io/z6mqjyyzz/media/public/0d12662c241c4e1c8_image.png?tr=w-126,q-60,f-avif",
                    price: "Price not set"
                },
                { 
                    name: "HMD Dispovan 2ml Syringe with Needle",
                    image: "https://ik.imagekit.io/z6mqjyyzz/media/public/dc4c495db0d04ebd8_mbsj046_1.jpg?tr=w-126,q-60,f-avif",
                    price: "Price not set"
                },
                { 
                    name: "HMD Unolok 3ml Syringe with Needle",
                    image: "https://ik.imagekit.io/z6mqjyyzz/media/public/08c98ab1dcc84289b_image.png?tr=w-126,q-60,f-avif",
                    price: "Price not set"
                },
                { 
                    name: "HMD Dispovan 2.5ml Syringe with Needle",
                    image: "https://ik.imagekit.io/z6mqjyyzz/media/public/2b5f27fc0542414d9_dv2-5-500x500.png?tr=w-126,q-60,f-avif",
                    price: "Price not set"
                },
                { 
                    name: "HMD Dispovan 10ml Syringe with Needle",
                    image: "https://ik.imagekit.io/z6mqjyyzz/media/public/b25cb7eea84b4ef6a_image.png?tr=w-126,q-60,f-avif",
                    price: "Price not set"
                }
            ];
            let productsHTML = "";
            syringeWithNeedleProducts.forEach(prod => {
                productsHTML += renderProduct(prod);
            });
            document.querySelector('.product-grid').innerHTML = productsHTML;
        } else if(section === "consumables-type" && item === "Generic") {
            const genericProducts = [
                { 
                    name: "Cooper Surgicals Lone-Star Retractor System",
                    image: "https://ik.imagekit.io/z6mqjyyzz/media/public/9057d11c6bba40d18_image_1706.jpg?tr=w-126,q-60,f-avif",
                    price: "Price not set"
                },
                { 
                    name: "Cooper Surgical LL100 Cryosurgical System",
                    image: "https://ik.imagekit.io/z6mqjyyzz/media/public/1d9720d5c3a04454a_72f76910-862f-4739-9bca-4fdbd2837c28mediumLL100.jpg?tr=w-126,q-60,f-avif",
                    price: "Price not set"
                },
                { 
                    name: "Agva Ventilator",
                    image: "https://ik.imagekit.io/z6mqjyyzz/media/public/c4bdb70bf76e42378_aava-ventilator-_av-ad-covid_brochure-1.jpg?tr=w-126,q-60,f-avif",
                    price: "Price not set"
                },
                { 
                    name: "Mindray Reusable NIBP Cuff Neonate",
                    image: "https://ik.imagekit.io/z6mqjyyzz/media/public/mindray-reusable-cuff-child-with-connector-18-26cm-0010-30-12158-25_02_2025-edd1b2c9.jpg?tr=w-126,q-60,f-avif",
                    price: "Price not set"
                },
                { 
                    name: "Diacare RP",
                    image: "https://ik.imagekit.io/z6mqjyyzz/media/public/diacare-rp-cold-sterilant-5ltrs-25_03_2025-84d3ca82.png?tr=w-126,q-60,f-avif",
                    price: "Price not set"
                },
                { 
                    name: "Mindray O2 Sensor Cable - WATO EX-20Vet (0601-20-78941)",
                    image: "https://ik.imagekit.io/z6mqjyyzz/media/public/738b4ef227004f80b_mindray-wato-ex-20-o2-wire-of-oxygen-sensord1ac8.webp?tr=w-126,q-60,f-avif",
                    price: "Price not set"
                }
            ];
            let productsHTML = "";
            genericProducts.forEach(prod => {
                productsHTML += renderProduct(prod);
            });
            document.querySelector('.product-grid').innerHTML = productsHTML;
        } else {
            // Simulate multiple product items
            const numberOfProducts = 6;
            let productsHTML = '';
            for (let i = 1; i <= numberOfProducts; i++) {
                const price = "$" + (Math.random() * 100 + 10).toFixed(2);
                productsHTML += renderProduct({ 
                    name: `${item} ${i}`, 
                    image: `https://via.placeholder.com/150?text=${encodeURIComponent(item + ' ' + i)}`, 
                    price 
                });
            }
            productGrid.innerHTML = productsHTML;
        }
    </script>
</body>
</html>
